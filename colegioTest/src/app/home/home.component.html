<div class="containerTitle">
  <mat-card appearance="outlined" class="cardSize">
    <mat-card-header>
      <mat-card-title> Colegio la Presentacion</mat-card-title>
      <mat-card-subtitle>por un futuro mejor</mat-card-subtitle>
    </mat-card-header>
    <mat-card-actions>
      <button mat-button>Añadir estudiante</button>
    </mat-card-actions>
  </mat-card>
  <mat-card appearance="outlined" class="cardSize">
    <mat-card-header>
      <mat-card-title> Colegio la Presentacion</mat-card-title>
      <mat-card-subtitle>por un futuro mejor</mat-card-subtitle>
    </mat-card-header>
    <mat-card-actions>
      <button (click)="activeFormButton('profesor')" mat-button>
        Añadir un profesor
      </button>
      <button (click)="activeFormButton('curso')" mat-button>
        Añadir un curso
      </button>
      <button (click)="activeFormButton('estudiante')" mat-button>
        Añadir un estudiante
      </button>
      <button (click)="activeFormButton('materia')" mat-button>
        Añadir un materia
      </button>
    </mat-card-actions>
  </mat-card>
</div>
<!-- Formulario profesor-->
<form
  [formGroup]="formProfesor"
  (ngSubmit)="handlerCreateProfesor()"
  *ngIf="activeProfesor"
>
  <label for="curso">Nombre:</label>
  <input id="curso" formControlName="nombre" />

  <label for="estudiantes">Apellido:</label>
  <input id="estudiantes" formControlName="apellido" />

  <button type="submit">
    {{ editingIndex !== null ? "Actualizar" : "Agregar" }}
  </button>
</form>
<!-- Formulario curso-->
<form
  [formGroup]="formCurso"
  (ngSubmit)="handlerCreateCurso()"
  *ngIf="activeCurso"
>
  <label for="curso">Nombre del curso:</label>
  <input id="curso" formControlName="nombre" />

  <label for="año">año del curso:</label>
  <input id="año" formControlName="anio" />

  <button type="submit">
    {{ editingIndex !== null ? "Actualizar" : "Agregar" }}
  </button>
</form>

<!-- Formulario Estudiante-->
<form
  [formGroup]="formEstudiante"
  (ngSubmit)="handlerCreateEstudiante()"
  *ngIf="activeEstudiante"
>
  <div style="display: flex; flex-direction: column; gap: 3px; margin: 20px">
    <label for="curso">Nombre:</label>
    <input id="curso" formControlName="nombre" />
    <label for="estudiantes">Apellido:</label>
    <input id="estudiantes" formControlName="apellido" />
    <label for="curso">Curso:</label>
    <select id="curso" formControlName="curso_id">
      <option>Seleccione...</option>
      <option *ngFor="let item of cursos" [value]="item.id">
        {{ item.nombre }} - {{ item.anio }}
      </option>
    </select>

    <button type="submit">
      {{ editingIndex !== null ? "Actualizar" : "Agregar" }}
    </button>
  </div>
</form>
<!-- Formulario Materias-->
<form
  [formGroup]="formMateria"
  (ngSubmit)="handlerCreateMateria()"
  *ngIf="activeMateria"
>
  <div style="display: flex; flex-direction: column; gap: 3px; margin: 20px">
    <label for="nombre">Nombre de la materia:</label>
    <input id="nombre" formControlName="nombre" />

    <label for="curso">Curso:</label>
    <select id="curso" formControlName="curso_id">
      <option>Seleccione...</option>
      <option *ngFor="let item of cursos" [value]="item.id">
        {{ item.nombre }} - {{ item.anio }}
      </option>
    </select>

    <label for="profesor">Profesor:</label>
    <select id="profesor" formControlName="profesor_id">
      <option>Seleccione...</option>
      <option *ngFor="let item of profesores" [value]="item.id">
        {{ item.nombre }} - {{ item.apellido }}
      </option>
    </select>

    <button type="submit">
      {{ editingIndex !== null ? "Actualizar" : "Agregar" }}
    </button>
  </div>
</form>
<!-- Formulario notas-->
<form [formGroup]="form" (ngSubmit)="addItem('nota')" *ngIf="activeNotas">
  <mat-form-field>
    <mat-label for="cursos">Curso:</mat-label>
    <select matNativeControl id="curso" formControlName="curso" required>
      <option *ngFor="let item of cursos" value="volvo">
        {{ item.nombre }} - {{ item.anio }}
      </option>
    </select>
  </mat-form-field>

  <mat-form-field>
    <mat-label for="estudiantes">Estudiante:</mat-label>
    <select
      matNativeControl
      id="estudiantes"
      formControlName="estudiantes"
      required
    >
      <option *ngFor="let item of estudiantes" [value]="item.id">
        {{ item.nombre }} {{ item.apellido }}
      </option>
    </select>
  </mat-form-field>

  <mat-form-field>
    <mat-label for="materia">Materia:</mat-label>
    <select matNativeControl id="materia" formControlName="materia" required>
      <option *ngFor="let item of estudiantes" [value]="item.id">
        {{ item.nombre }} {{ item.apellido }}
      </option>
    </select>
  </mat-form-field>

  <label for="nota">Nota:</label>
  <input id="nota" formControlName="nota" />

  <label for="profesor">Profesor:</label>
  <input id="profesor" formControlName="profesor" />

  <button type="submit">
    {{ editingIndex !== null ? "Actualizar" : "Agregar" }}
  </button>
</form>

<!-- Tabla -->
<div class="table-container">
  <table class="data-table">
    <thead>
      <tr>
        <th>Curso</th>
        <th>Estudiantes</th>
        <th>Materia</th>
        <th>Nota</th>
        <th>Profesor</th>
        <th>Editar</th>
        <th>Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of items; let i = index">
        <td>{{ item.curso }}</td>
        <td>{{ item.estudiantes }}</td>
        <td>{{ item.materia }}</td>
        <td>{{ item.nota }}</td>
        <td>{{ item.nombre + " " + item.apellido }}</td>
        <td>
          <button (click)="editItem(i)">Editar</button>
        </td>
        <td>
          <button (click)="deleteItem(i)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
